<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/static-clones/edx-platform/docs/how-tos/use_the_api.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="how-to-use-the-rest-api" names="how\ to\ use\ the\ rest\ api">
        <title>How To Use the REST API</title>
        <comment xml:space="preserve">How-tos should have a short introduction sentence that captures the user's goal and introduces the steps.</comment>
        <paragraph>This how-to will help you get setup to be able to make authenticated requests to
            the edx-platform REST API.</paragraph>
        <section ids="assumptions" names="assumptions">
            <title>Assumptions</title>
            <comment xml:space="preserve">This section should contain a bulleted list of assumptions you have of the
person who is following the How-to.  The assumptions may link to other
how-tos if possible.</comment>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>You have access to the edx-platform Django Admin (<literal>/admin</literal>) Panel.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>You have a user that you want to make the rest calls as (<literal>UserA</literal>).</paragraph>
                </list_item>
                <list_item>
                    <paragraph>You are familiar with <reference name="the basics of HTTP and Rest" refuri="https://code.tutsplus.com/a-beginners-guide-to-http-and-rest--net-16340t">the basics of HTTP and Rest</reference></paragraph>
                </list_item>
                <list_item>
                    <paragraph>For the purposes of this tutorial we’ll assume your LMS is located at
                        <reference refuri="https://lms.example.com">https://lms.example.com</reference></paragraph>
                </list_item>
            </bullet_list>
            <target ids="the-basics-of-http-and-rest" names="the\ basics\ of\ http\ and\ rest" refuri="https://code.tutsplus.com/a-beginners-guide-to-http-and-rest--net-16340t"></target>
        </section>
        <section ids="steps" names="steps">
            <title>Steps</title>
            <comment xml:space="preserve">A task should have 3 - 7 steps.  Tasks with more should be broken down into digestible chunks.</comment>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Go to <reference refuri="https://lms.example.com/admin/oauth2_provider/application/">https://lms.example.com/admin/oauth2_provider/application/</reference></paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click <inline classes="guilabel" rawtext=":guilabel:`Add Application`">Add Application</inline></paragraph>
                </list_item>
                <list_item>
                    <paragraph>Choose “UserA” for the user.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Choose <literal>Confidential</literal> Client Type</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Choose “Client Credentials” for the Authorization Grant Type</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Set a name for your application.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Save the <literal>client_id</literal> and <literal>client_secret</literal>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The best way to interact with the edx-platform REST API is by making
                        requests using the JWT Authorization header.  Use the <literal>client_id</literal> and
                        <literal>client_secret</literal> to get a JWT token.</paragraph>
                    <literal_block force="False" highlight_args="{}" language="python" linenos="False" xml:space="preserve">import base64
import requests

client_id = "vovj0AItd9EnrOKjkDli0HpSF9HoooaTY9yueafn"
# Client secrets should not be exposed in your code, we put it here to
# make the example more clear.
client_secret = "a3Fkwr24dfDSlIXt3v3q4Ob41CYQNZyGmtK8Y8ax0srpIa2vJON3OC5Rvj1i1wizsIUv1W1qM1Q2XPeuyjucNixsHXZsuw1dn2B9nH3IyjSvuFb5KoydDvWX8Hx8znqD"

credential = f"{client_id}:{client_secret}"
encoded_credential = base64.b64encode(credential.encode("utf-8")).decode("utf-8")

headers = {"Authorization": f"Basic {encoded_credential}", "Cache-Control": "no-cache"}
data = {"grant_type": "client_credentials", "token_type": "jwt"}

token_request = requests.post(
    "http://lms.example.com/oauth2/access_token", headers=headers, data=data
)
access_token = token_request.json()["access_token"]</literal_block>
                </list_item>
                <list_item>
                    <paragraph>The code above will produce a JWT token that you can use to hit any existing
                        edx-platform API endpoint.</paragraph>
                    <container classes="literal-block-wrapper" ids="example-get-all-courses-you-re-enrolled-in" literal_block="True" names="example,\ get\ all\ courses\ you're\ enrolled\ in.">
                        <caption>Example, get all of UserA’s Enrollments</caption>
                        <literal_block force="False" highlight_args="{}" language="python" linenos="False" xml:space="preserve">enrollment_request = requests.get(
    "http://lms.example.com/api/enrollment/v1/enrollment",
    headers={"Authorization": f"JWT {access_token}"},
)</literal_block>
                    </container>
                </list_item>
            </enumerated_list>
            <seealso>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph><reference internal="True" refuri="../concepts/rest_apis"><inline classes="doc">edx-platform REST API Concepts</inline></reference></paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><reference internal="True" refuri="../references/auth_code_samples"><inline classes="doc">Authentication Related Code Samples</inline></reference></paragraph>
                    </list_item>
                </bullet_list>
            </seealso>
        </section>
    </section>
</document>
