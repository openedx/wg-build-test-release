<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/static-clones/edx-platform/docs/decisions/0008-secret-key-usage.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="django-secret-key-usage" names="django\ secret\ key\ usage">
        <title>Django Secret Key Usage</title>
        <section ids="status" names="status">
            <title>Status</title>
            <paragraph>Pending</paragraph>
        </section>
        <section ids="context" names="context">
            <title>Context</title>
            <paragraph>Djangoâ€™s Secret key is used by Django to cryptographically sign various
                capabilities in Django.  It is also used by the edx-platform in various cases
                as a <reference name="pepper" refuri="https://en.wikipedia.org/wiki/Pepper_(cryptography)">pepper</reference> when hashing data to anonymize it while keeping it consistent.
                Some of the uses of the <literal>SECRET_KEY</literal> in edx-platform were not resilient to
                the key being rotated.  As a part of ARCHBOM-1646 those code paths are being
                updated so that regular rotation of the <literal>SECRET_KEY</literal> will cause temporary
                issues but will not fully break things.  ie. Sessions might get invalidated or
                data might not be correlatable over the change boundary but the change is
                otherwise safe.</paragraph>
            <target ids="pepper" names="pepper" refuri="https://en.wikipedia.org/wiki/Pepper_(cryptography)"></target>
        </section>
        <section ids="decisions" names="decisions">
            <title>Decisions</title>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Any uses of <literal>SECRET_KEY</literal> should be resilient to that key being rotated.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Wherever the <literal>SECRET_KEY</literal> is used, it should also document the impact of
                        rotating the key.</paragraph>
                    <block_quote>
                        <paragraph>For example:</paragraph>
                        <paragraph>Rotation is a one-time discontinuity in tracking metrics and should be
                            accompanied by a heads-up to data researchers</paragraph>
                    </block_quote>
                </list_item>
                <list_item>
                    <paragraph>Whenever the <literal>SECRET_KEY</literal> is used, it should also document the
                        consequences of the key being exposed.</paragraph>
                    <block_quote>
                        <paragraph>For example:</paragraph>
                        <paragraph>Exposure of secret could result in identifying the tracking data for users
                            if their actual session keys are also known</paragraph>
                    </block_quote>
                </list_item>
            </enumerated_list>
        </section>
        <section ids="consequences" names="consequences">
            <title>Consequences</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>The <literal>SECRET_KEY</literal> should only be used in cases where rotation can be done
                        quickly.  Because the secret is shared, not changing it quickly can expose
                        multiple features to attack if any one usage is more expensive to rotate than others.
                        If you are considering using the <literal>SECRET_KEY</literal> in a situation where the act
                        of rotation will be expensive (time, coordination, preparation) you should
                        instead consider using a new unique secret specific to your use case.</paragraph>
                </list_item>
            </bullet_list>
        </section>
    </section>
</document>
