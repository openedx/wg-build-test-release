<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/static-clones/edx-platform/docs/references/docs/openedx/core/djangoapps/staticfiles/docs/decisions/0001-purpose-of-app.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="purpose-of-this-app-staticfiles" names="purpose\ of\ this\ app:\ staticfiles">
        <title>Purpose of this app: staticfiles</title>
        <section ids="status" names="status">
            <title>Status</title>
            <paragraph><strong>Accepted</strong></paragraph>
        </section>
        <section ids="context" names="context">
            <title>Context</title>
            <paragraph>Django provides the <literal>collectstatic</literal> management command, which collects static assets into the <literal>STATIC_ROOT</literal> so that they can be served by some system external to Django (like nginx or caddy), as is usually desired in production environments.</paragraph>
            <paragraph>edx-platform contains several types of files that we don’t want to be collected into the <literal>STATIC_ROOT</literal>. Previously, these files had to be supplied to the management command using the <literal>--ignore</literal> option:</paragraph>
            <literal_block force="False" language="default" linenos="False" xml:space="preserve">./manage.py lms collectstatic --ignore geoip --ignore sass ...etc
./manage.py cms collectstatic --ignore geoip --ignore sass ...etc</literal_block>
            <paragraph>This yields a long, hard-to-remember command. Paver wrapped the command in its big <literal>paver update_assets</literal> task, but that task also builds assets, which is totally overkill when you’re just trying to collect them.</paragraph>
            <paragraph>Fortunately, <literal>collectstatic</literal>’s default ignore patterns can be configured by defining a custom AppConfig class.</paragraph>
        </section>
        <section ids="decision" names="decision">
            <title>Decision</title>
            <paragraph>In this app, we define such an config (<literal>EdxPlatformStaticFilesConfig</literal>) for LMS and CMS. Now, devs can collect LMS &amp; CMS assets with just:</paragraph>
            <literal_block force="False" language="default" linenos="False" xml:space="preserve">./manage.py lms collectstatic
./manage.py cms collectstatic</literal_block>
            <paragraph>Going forward, this app could be used to further customize the Django staticfiles app, although at time of writing no further customizations are planned.</paragraph>
            <paragraph>Although the current guidance is to avoid creating new edx-platform apps, there is no other way to add this configuration to the platform. Because the ignore patterns are highly specific to edx-platform, creating this app as a separate library would not be useful.</paragraph>
        </section>
        <section ids="further-reading" names="further\ reading">
            <title>Further reading</title>
            <paragraph>Django’s <literal>collecstatic</literal> ignore behavior: <reference refuri="https://docs.djangoproject.com/en/3.2/ref/contrib/staticfiles/#customizing-the-ignored-pattern-list">https://docs.djangoproject.com/en/3.2/ref/contrib/staticfiles/#customizing-the-ignored-pattern-list</reference></paragraph>
            <paragraph>Why we are moving away from Paver wrappers: <reference refuri="https://github.com/openedx/edx-platform/blob/master/docs/decisions/0017-reimplement-asset-processing.rst">https://github.com/openedx/edx-platform/blob/master/docs/decisions/0017-reimplement-asset-processing.rst</reference></paragraph>
            <paragraph>Issue: <reference refuri="https://github.com/openedx/edx-platform/issues/31658">https://github.com/openedx/edx-platform/issues/31658</reference></paragraph>
        </section>
    </section>
</document>
