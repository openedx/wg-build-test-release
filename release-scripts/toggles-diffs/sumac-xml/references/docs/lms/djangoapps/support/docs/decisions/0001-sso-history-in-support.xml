<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/static-clones/edx-platform/docs/references/docs/lms/djangoapps/support/docs/decisions/0001-sso-history-in-support.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="registering-sso-history-model-in-support" names="1.\ registering\ sso\ history\ model\ in\ support">
        <title>1. Registering SSO History Model in Support</title>
        <section ids="status" names="status">
            <title>Status</title>
            <paragraph>Accepted</paragraph>
        </section>
        <section ids="context" names="context">
            <title>Context</title>
            <paragraph>SSO History was one of the feature requested by support that provides the
                historical data of any particular SSO record (based on UserSocialAuth)
                in tools UI via support API. This SSO History can be utilized to track id changes,
                Additional data or any other relevant data changes inside SSO model.</paragraph>
            <paragraph>Although the UserSocialAuth is applied within common apps but is not configured for
                cms. This has caused major breakage and a temporary outage in the authentication flow
                in cms stage.</paragraph>
        </section>
        <section ids="decision" names="decision">
            <title>Decision</title>
            <paragraph>The simple_django_history registration for UserSocialAuth model
                is introduced in the Support app for LMS instead of the
                third_party_auth in Common.</paragraph>
        </section>
        <section ids="consequences" names="consequences">
            <title>Consequences</title>
            <paragraph>The most optimum method to introduce the feature was to register the model
                in support app and get the data via support API.</paragraph>
        </section>
        <section ids="alternative-rejected-approaches" names="alternative/rejected\ approaches">
            <title>Alternative/Rejected Approaches</title>
            <paragraph>Addition for third_party_auth was attempted for the studio,
                but failed in the stage. The primary reason was the failing migration
                tests in CMS with the current configurations in the studio.
                We tried to add the third_party_auth as an installed app on Studio
                but later found out that Studio is not configured for third_party_auth
                and configuring third_party_auth on studio would have caused auth issues.
                Consequently, there was over 6 hours of pipeline outage on stage
                and we had to revert the changes made in the system.</paragraph>
            <paragraph>Third party auth is primarily LMS-only app but since it has been in common,
                we opted to go ahead with adding history in common,
                only to later realize the impact of enabling third party auth in studio.</paragraph>
        </section>
    </section>
</document>
