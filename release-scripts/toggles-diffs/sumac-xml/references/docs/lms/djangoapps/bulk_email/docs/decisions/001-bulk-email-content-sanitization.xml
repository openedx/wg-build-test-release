<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/static-clones/edx-platform/docs/references/docs/lms/djangoapps/bulk_email/docs/decisions/001-bulk-email-content-sanitization.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="bulk-email-html-content-will-not-be-sanitized" names="bulk\ email\ html\ content\ will\ not\ be\ sanitized">
        <title>Bulk Email HTML Content Will Not Be Sanitized</title>
        <section ids="status" names="status">
            <title>Status</title>
            <paragraph>Accepted</paragraph>
        </section>
        <section ids="background" names="background">
            <title>Background</title>
            <paragraph>The Bulk Course Email tool allows course teams to author messages that can be sent to learners and supporting staff enrolled in their courses. An editor is provided as part of the tool for authoring these email messages. If desired, the editor allows advanced users to write custom raw HTML in the message.</paragraph>
            <paragraph>It is considered good security practice to scan and sanitize user-provided content before storing or using the data.</paragraph>
        </section>
        <section ids="decision" names="decision">
            <title>Decision</title>
            <paragraph>We will not sanitize the HTML content received through the bulk course email tool on the back end. The content that instructors create for courses also allows unfiltered html, which is arguably a larger risk than email, which will block the execution of certain types of code. In the future, if a standard is set for filtering course content, the same standard could be applied here.</paragraph>
        </section>
        <section ids="rejected-solutions" names="rejected\ solutions">
            <title>Rejected solutions</title>
            <section ids="bleach-with-allowlist" names="bleach\ with\ allowlist">
                <title>Bleach with allowlist</title>
                <paragraph>It has been standard practice for us to use <reference name="Bleach" refuri="https://bleach.readthedocs.io/en/latest/">Bleach</reference> with an allowlist to sanitize user provided content within the Open edX ecosystem. Santization using blocklists is vulnerable to obfuscation attacks, and the industry standard is to use an allowlist and explicitly enumerate all supported values. Given that this tool has been live for many years with no sanitization in place, a highly restrictive allowlist would be difficult to roll out to users, resulting in broken email templates and angry instructors who are used to having free rein. A permissive allowlist would potentially address this, but presents the non-trivial problem of assembling and maintaining a comprehensive list.</paragraph>
                <target ids="bleach" names="bleach" refuri="https://bleach.readthedocs.io/en/latest/"></target>
            </section>
        </section>
    </section>
</document>
