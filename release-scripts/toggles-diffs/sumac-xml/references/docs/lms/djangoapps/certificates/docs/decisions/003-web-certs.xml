<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/static-clones/edx-platform/docs/references/docs/lms/djangoapps/certificates/docs/decisions/003-web-certs.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="web-html-course-certificates" names="web\ (html)\ course\ certificates">
        <title>Web (HTML) course certificates</title>
        <section ids="status" names="status">
            <title>Status</title>
            <paragraph>Accepted</paragraph>
        </section>
        <section ids="background" names="background">
            <title>Background</title>
            <paragraph>edX-platform currently has code for both PDF and web (or HTML) course
                certificates. Over time, much of the PDF certificate code has been deprecated
                or disabled. In particular, edX-platform has not supported the generation of
                PDF course certificates for some time.</paragraph>
        </section>
        <section ids="decision" names="decision">
            <title>Decision</title>
            <paragraph>In the future, all code related to PDF certificates will be removed from
                edx-platform. Only web certificates will be able to be generated or viewed.
                First, the code to generate PDF certificates will be removed. Later, the code
                to view existing PDF certificates will also be removed.</paragraph>
            <paragraph>All course runs that use course certificates should be configured to use web
                certificates.</paragraph>
        </section>
        <section ids="configuring-web-certificates" names="configuring\ web\ certificates">
            <title>Configuring web certificates</title>
            <paragraph>To configure web certificates, follow the documentation to <reference name="Enable Course Certificates" refuri="https://edx.readthedocs.io/projects/edx-installing-configuring-and-running/en/latest/configuration/enable_certificates.html">Enable Course
                    Certificates</reference> and <reference name="Set Up Certificates in Studio" refuri="https://edx.readthedocs.io/projects/open-edx-building-and-running-a-course/en/latest/set_up_course/studio_add_course_information/studio_creating_certificates.html">Set Up Certificates in Studio</reference>.</paragraph>
            <paragraph>In particular, the following things must be true in order for a web certificate
                to be viewable:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>The <emphasis>CERTIFICATES_HTML_VIEW</emphasis> feature is globally enabled</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The course run has web certificates enabled</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The course run has at least 1 certificate created and activated</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>To enable the <emphasis>CERTIFICATES_HTML_VIEW</emphasis> feature, follow the instructions to
                <reference name="Enable Course Certificates" refuri="https://edx.readthedocs.io/projects/edx-installing-configuring-and-running/en/latest/configuration/enable_certificates.html">Enable Course Certificates</reference>.</paragraph>
            <paragraph>To ensure that a course run has web certificates enabled, follow the
                instructions to <reference name="Set Up Certificates in Studio" refuri="https://edx.readthedocs.io/projects/open-edx-building-and-running-a-course/en/latest/set_up_course/studio_add_course_information/studio_creating_certificates.html">Set Up Certificates in Studio</reference>. In particular, follow the
                steps to <emphasis>Enable a Certificate</emphasis>. This will result in the course run’s course
                overview having <emphasis>cert_html_view_enabled</emphasis> set to True</paragraph>
            <paragraph>To ensure that a course run has at least 1 certificate created and activated,
                follow the instructions to <reference name="Set Up Certificates in Studio" refuri="https://edx.readthedocs.io/projects/open-edx-building-and-running-a-course/en/latest/set_up_course/studio_add_course_information/studio_creating_certificates.html">Set Up Certificates in Studio</reference>. In particular,
                follow the steps to <emphasis>Create a Certificate</emphasis> and to <emphasis>Activate a Certificate</emphasis>.
                This will result in the course run’s course overview having
                <emphasis>has_any_active_web_certificate</emphasis> set to True</paragraph>
            <paragraph>To find any course runs with downloadable certificates that might need to be
                updated, you can run a query similar to this:</paragraph>
            <literal_block force="False" highlight_args="{}" language="SQL" linenos="False" xml:space="preserve">select distinct
    cert.course_id
from
    CERTIFICATES_GENERATEDCERTIFICATE as cert
join
    COURSE_OVERVIEWS_COURSEOVERVIEW as overview
on
    cert.course_id = overview.id
where
    cert.status = 'downloadable'
and
(
    overview.cert_html_view_enabled = False
or
    overview.has_any_active_web_certificate = False
)
order by
    cert.course_id</literal_block>
        </section>
        <section ids="viewing-a-web-certificate" names="viewing\ a\ web\ certificate">
            <title>Viewing a web certificate</title>
            <paragraph>To manually view a downloadable web certificate, first determine your site’s
                base URL. For edX, this is <literal>https://courses.edx.org/</literal></paragraph>
            <paragraph>Next, find the desired certificate in the CERTIFICATES_GENERATEDCERTIFICATE
                database table.</paragraph>
            <paragraph>To view the certificate, find the <emphasis>verify_uuid</emphasis> from the table, then construct
                a URL by appending <emphasis>/certificates/verify_uuid</emphasis> to the base URL. For example,
                the URL for edX will look like this:
                <literal>https://courses.edx.org/certificates/verify_uuid</literal></paragraph>
            <paragraph>The web certificate will not be viewable if the course run is not
                properly configured for web certificates. If this is the case, follow the
                instructions above to configure the course run for web certificates.</paragraph>
        </section>
        <section ids="consequences" names="consequences">
            <title>Consequences</title>
            <paragraph>To use course certificates, follow the documentation to <reference name="Enable Course Certificates" refuri="https://edx.readthedocs.io/projects/edx-installing-configuring-and-running/en/latest/configuration/enable_certificates.html">Enable Course
                    Certificates</reference> and <reference name="Set Up Certificates in Studio" refuri="https://edx.readthedocs.io/projects/open-edx-building-and-running-a-course/en/latest/set_up_course/studio_add_course_information/studio_creating_certificates.html">Set Up Certificates in Studio</reference>.</paragraph>
            <paragraph>All course runs that use course certificates should be configured to use web
                certificates.</paragraph>
            <paragraph>Once the code to generate and view PDF certificates is removed, only web
                certificates will be able to be generated or viewed.</paragraph>
        </section>
        <section ids="references" names="references">
            <title>References</title>
            <paragraph>Documentation for enabling course certificates:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph><reference name="Enable Course Certificates" refuri="https://edx.readthedocs.io/projects/edx-installing-configuring-and-running/en/latest/configuration/enable_certificates.html">Enable Course Certificates</reference></paragraph>
                </list_item>
                <list_item>
                    <paragraph><reference name="Set Up Certificates in Studio" refuri="https://edx.readthedocs.io/projects/open-edx-building-and-running-a-course/en/latest/set_up_course/studio_add_course_information/studio_creating_certificates.html">Set Up Certificates in Studio</reference></paragraph>
                </list_item>
            </bullet_list>
            <paragraph>PRs that deprecated or disabled PDF certificates:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph><reference name="Disable PDF certificate generation" refuri="https://github.com/openedx/edx-platform/pull/19833">Disable PDF certificate generation</reference></paragraph>
                </list_item>
                <list_item>
                    <paragraph><reference name="Deprecate web certificate setting" refuri="https://github.com/openedx/edx-platform/pull/17285">Deprecate web certificate setting</reference></paragraph>
                </list_item>
            </bullet_list>
            <paragraph>Related DEPR (edX deprecation process) tickets:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph><reference name="Remove PDF generation code" refuri="https://openedx.atlassian.net/browse/DEPR-155">Remove PDF generation code</reference></paragraph>
                </list_item>
                <list_item>
                    <paragraph><reference name="Remove PDF view code" refuri="https://openedx.atlassian.net/browse/DEPR-157">Remove PDF view code</reference></paragraph>
                </list_item>
            </bullet_list>
            <target ids="enable-course-certificates" names="enable\ course\ certificates" refuri="https://edx.readthedocs.io/projects/edx-installing-configuring-and-running/en/latest/configuration/enable_certificates.html"></target>
            <target ids="deprecate-web-certificate-setting" names="deprecate\ web\ certificate\ setting" refuri="https://github.com/openedx/edx-platform/pull/17285"></target>
            <target ids="disable-pdf-certificate-generation" names="disable\ pdf\ certificate\ generation" refuri="https://github.com/openedx/edx-platform/pull/19833"></target>
            <target ids="set-up-certificates-in-studio" names="set\ up\ certificates\ in\ studio" refuri="https://edx.readthedocs.io/projects/open-edx-building-and-running-a-course/en/latest/set_up_course/studio_add_course_information/studio_creating_certificates.html"></target>
            <target ids="remove-pdf-generation-code" names="remove\ pdf\ generation\ code" refuri="https://openedx.atlassian.net/browse/DEPR-155"></target>
            <target ids="remove-pdf-view-code" names="remove\ pdf\ view\ code" refuri="https://openedx.atlassian.net/browse/DEPR-157"></target>
        </section>
    </section>
</document>
