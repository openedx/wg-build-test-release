<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/openedx/edx-platform/docs/concepts/frontend/styling.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="styling-in-edx-platform" names="styling\ in\ edx-platform">
        <title>Styling in edx-platform</title>
        <paragraph>Over time, our Sass styling has become a little convoluted, with three major
            reworkings often leading to confusion when a developer needs to style in
            multiple locations across edx-platform. The main endeavors were v1, v2 (or
            pattern library) and Bootstrap. We are trying to move away from using v2, as the
            pattern library is deprecated, but there may still be locations in the code that
            reference those styles (please remove them as you see fit).</paragraph>
        <paragraph>Our platform uses a system of Sass partials that combine to compile into a
            single large css file to be rendered on the page. From the Sass docs:</paragraph>
        <block_quote>
            <paragraph>You can create partial Sass files that contain little snippets of CSS
                that you can include in other Sass files. This is a great way to
                modularize your CSS and help keep things easier to maintain. A partial
                is simply a Sass file named with a leading underscore. You might name it
                something like _partial.scss. The underscore lets Sass know that the
                file is only a partial file and that it should not be generated into a
                CSS file. Sass partials are used with the <literal>@import</literal> directive.</paragraph>
        </block_quote>
        <paragraph>This structure allows us to break up our styling into small pieces, making
            readability and maintenance easier, while often at the expense of structural
            complexity as a code base grows. Here is an example, directly from edx-platform,
            for how the partials flow to a single scss file that compiles into CSS for the
            page to use. This is a page that uses v1 styling.</paragraph>
        <figure ids="id1">
            <image alt="Sass Compilation for v1 CSS" candidates="{'*': 'concepts/frontend/v1_sass_pipeline.webp'}" original_uri="v1_sass_pipeline.webp" uri="concepts/frontend/v1_sass_pipeline.webp"></image>
            <caption>Sass Compilation for v1 CSS</caption>
        </figure>
        <paragraph>Note that this only shows an example, there are far more partials that come
            together to make the <literal>lms-main-v1.css</literal> final file.</paragraph>
        <paragraph>As you can see, the <literal>lms-main-v1.scss</literal> file does not have a leading
            underscore, telling the compilation to turn that scss file into an actual css
            file to be rendered on the page. If you were to use the Chrome Inspector tool
            and look at the styling, you will see that there is one unified <literal>lms-
main-v1.css</literal> file that contains all the element styles.</paragraph>
        <paragraph>The <literal>lms-main-v1.scss</literal> file uses the <literal>@import</literal> statement to pull in the
            <literal>_build- base-v1.scss</literal> and <literal>build-lms-v1.scss</literal> files which in turn import
            more partials down the road. It is critical to recognize that this tree works in
            a depth-first, first-come-first-serve manner. That means that styles that are
            imported early in the process cannot reference Sass variables imported later in
            the process (ie: <literal>bootstrap/variables</literal> cannot reference variables from
            <literal>shared/header</literal>).</paragraph>
        <paragraph>This diagram describes the process for the <strong>v1 styles</strong>, and there is a similar
            setup for <literal>lms-main-v2.scss</literal> as well as <literal>bootstrap/lms-main.scss</literal>. Each
            individual HTML page on the edx-platform specifies which of the three that page
            wants to use for styling. Please note that as an organization, we are slowly
            trying to 1) move everything over to the bootstrap/lms-main.scss file and 2)
            deprecate and stop using any v2 files. <literal>lms-main-v1.scss</literal> can still be used,
            but a migration over to <literal>bootstrap/lms-main.scss</literal>, and a migration of any
            relevant partials from the v1 structure, would be a valuable endeavor.</paragraph>
        <paragraph>Please note that as you add partials, make sure that they are not already being
            imported in another file (ie: you add a node to the tree above that already
            exists on the tree).</paragraph>
        <section ids="what-theming-does-and-how-to-do-it" names="what\ theming\ does,\ and\ how\ to\ do\ it">
            <title>What theming does, and how to do it</title>
            <paragraph>By thinking about the styling as a tree, theming becomes a lot simpler. All
                theming means is that you can override one of the partials above by matching
                the exact path in the <literal>edx-platform/themes</literal> directory. So, for example, to
                override the shared header file (located at <literal>lms/static/sass/shared/_header</literal>),
                you would simply go into the <literal>edx-platform/themes/[theme you want to
override]/lms/static/shared</literal> folder and add a _header.scss file. When django
                compiles the assets, it will use this file as a replacement to the main
                edx-platform implementation.</paragraph>
            <paragraph>If you look at the actual code base, you will see that we have a standard of
                using the partials directory for these overrides files. This keeps the specific
                components isolated from the core styling to reduce errors when people override
                files and forget to import other files that are needed elsewhere on the site.
                This is a good practice that future development should adhere to.</paragraph>
            <paragraph>Final Note: When dealing with front end changes, it is a good idea to also check
                the edx-themes repo, that works exactly like our themes folder, but also
                includes html templates that can further confuse things.</paragraph>
        </section>
        <section ids="bootstrap-and-edx-platform" names="bootstrap\ and\ edx-platform">
            <title>Bootstrap and edx-platform</title>
            <paragraph>In a month and a half endeavor in the Fall, Andy and I worked on integrating
                Bootstrap into the platform for three main reasons.</paragraph>
            <paragraph>1. <strong>To unify our styling:</strong> By specifying colors and variables that can be used
                universally, reducing the ‘50 shades of grey’ issue and inconsistencies in the
                ways that we style components.</paragraph>
            <paragraph>2. <strong>To add a widely used component library:</strong> Bootstrap has a robust community
                of developers that contribute to their open source component library, allowing
                for easier prototyping and create of front end experiences.</paragraph>
            <paragraph>3. <strong>To simplify theming:</strong> Since we now have a single unified source of truth
                for our variables, openedx instances and alternative themes can simply override
                those files to customly style their sites.</paragraph>
            <paragraph>Relating to the above styling conversation, we have pulled in the entire
                bootstrap styling library into <literal>lms-main.scss</literal>, but only partially pulled it
                into the v1 and v2 implementations due to naming conflicts. For example, we
                could not pull in the bootstrap modal, due to conflicts with our own modal
                styling (both use the generic <literal>.modal</literal> class). We were, however, able <strong>to
                    pull in the entire bootstrap javascript file</strong>, since that file overrides jQuery
                in ways that our current application does not (meaning no conflicts).</paragraph>
            <paragraph>Therefore, any pages that use lms-main.scss can use any bootstrap component out
                of the box. <strong>To use bootstrap components in older, v1, v2 pages</strong> we have to
                manually specify the exact Sass partial from the <literal>edx-
platform/node_modules/bootstrap</literal> that we want. For example, to add an alert to
                a v1 page, you would add to <literal>base/build</literal> the partial <literal>bootstrap/scss/alert</literal>.
                Steps outlined below.</paragraph>
            <paragraph>1. Determine from the <literal>node_modules/bootstrap/scss</literal> directory which component
                you want to import.</paragraph>
            <paragraph>2. Add that import (i.e: <literal>bootstrap/scss/alert</literal>) somewhere in the Sass tree,
                most likely to <literal>base/build.scss</literal></paragraph>
            <paragraph>3. NOTE: Run <literal>paver compile_sass</literal> to make sure it works, if not, there is
                likely a bootstrap mixin that you are missing. If so, search for the mixin in
                <literal>node_modules/bootstrap/scss/mixins</literal> and import it (i.e:
                <literal>bootstrap/scss/mixins/alert</literal>)</paragraph>
            <paragraph>4. You are done. Add the component using HTML or Javascript. Use the Bootstrap
                Component Docs for examples.</paragraph>
        </section>
        <section ids="faq" names="faq">
            <title>FAQ</title>
            <section ids="i-want-to-add-a-new-scss-file-for-a-feature-on-a-particular-page-how-do-i-add-it" names="i\ want\ to\ add\ a\ new\ scss\ file\ for\ a\ feature\ on\ a\ particular\ page,\ how\ do\ i\ add\ it?">
                <title>I want to add a new scss file for a feature on a particular page, how do I add it?</title>
                <paragraph>First, you want to check which root file the page uses, whether it is
                    lms-main-v1, lms-main-v2 or lms-main. Then, go to that file and trace down the
                    tree to find a good spot for the new scss file to live. So, for example, if you
                    are adding an LMS feature and the page uses lms-main-v1, you can trace down lms-
                    main-v1 &gt; _build_lms_v1 and see that there are plenty of standalone imports that
                    look like features. Simply add your file to the lms/static/sass directory in a
                    similar manner and add it as an @import to that page.</paragraph>
            </section>
            <section ids="why-isn-t-my-bootstrap-component-styling-like-in-the-bootstrap-docs" names="why\ isn't\ my\ bootstrap\ component\ styling\ like\ in\ the\ bootstrap\ docs?">
                <title>Why isn’t my bootstrap component styling like in the bootstrap docs?</title>
                <paragraph>In any pages that use the lms-main.css compiled file, the bootstrap component
                    will render. This case only arises when we are working with a legacy v1 or v2
                    page. As outlined earlier in this document, we cannot import the entire
                    bootstrap repository due to conflicts with old styling. For v1 and v2, we are
                    gradually pulling in styles for components, so this must mean that you are
                    building a component that has not yet been used in the LMS/Studio.</paragraph>
                <paragraph>To add the styles, you first need to find them in the bootstrap package. To do
                    so, search at edx-platform/node_modules/bootstrap/scss for the file that you
                    need. Then add this to the v1 or v2 tree, most likely to the build/base.scss
                    file. Note that you may hit issues with mixins when you try to compile the SASS.
                    In this case, check the edx-platform/node_modules/bootstrap/scss/mixins folder
                    and import that into the lms or studio before trying to import the component
                    styling.</paragraph>
            </section>
        </section>
    </section>
</document>
