<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/openedx/edx-platform/docs/references/docs/lms/djangoapps/teams/docs/decisions/0001-field-to-store-enabled-disabled-status.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="add-a-new-field-to-store-enable-disabled-status-of-teams" names="add\ a\ new\ field\ to\ store\ enable/disabled\ status\ of\ teams">
        <title>Add a new field to store enable/disabled status of teams</title>
        <section ids="status" names="status">
            <title>Status</title>
            <paragraph>Proposal</paragraph>
        </section>
        <section ids="context" names="context">
            <title>Context</title>
            <paragraph>While implementing a UI to enable/disable teams we ran into issues due to the
                way teams is considered enabled or disabled, which is with the presence of one
                or more teamsets. So enabling requires adding a teamset and disabling requires
                removing all teamsets.</paragraph>
            <paragraph>Since we’d like to have a simple toggle to enable/disable teams this complicates
                the implementation significantly.</paragraph>
        </section>
        <section ids="decisions" names="decisions">
            <title>Decisions</title>
            <paragraph>We can add a new field called <literal>teams_enabled</literal> (or simply <literal>enabled</literal>) to the
                <literal>TeamsConfigField</literal> that stores the teams configuration in the course.</paragraph>
            <paragraph>Currently the <literal>is_enabled</literal> method on
                <literal>openedx.core.lib.teams_config.TeamsConfig</literal> simply checks that the team_sets
                list isn’t empty, it should switch to checking for the the <literal>enabled</literal> field
                instead. It can fall back to the existing behaviour so existing courses work
                as-is. However, any update to the value will add this boolean field.</paragraph>
        </section>
        <section ids="alternative" names="alternative">
            <title>Alternative</title>
            <paragraph>Any time teams is disabled, we can move the the existing teams configuration in
                the JSON from the key <literal>team_sets</literal> to <literal>teams_sets_inactive</literal>. Existing code will
                ignore this field and disable the teams tab and other teams features.</paragraph>
            <paragraph>However the new UI can be made aware of this backup field and use it to
                reinitialise the teams config based on old data if needed. So if a course is
                set up with teams properly with a few teamsets, and the toggle is disabled,
                the data will be moved from <literal>team_sets</literal> / <literal>topics</literal> to <literal>team_sets_inactive</literal> and
                if teams is enabled again, the data will be moved from <literal>team_sets_inactive</literal> to
                <literal>team_sets</literal>.</paragraph>
            <paragraph>Optionally we can even allow configuring team sets this way before they are
                enabled. i.e. in a disabled state all teamset operation can be redirected to
                <literal>team_sets_inactive</literal></paragraph>
        </section>
    </section>
</document>
