<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/openedx/edx-platform/docs/references/docs/openedx/core/lib/docs/decisions/0002-logging-and-monitoring-expected-errors-removed.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="logging-and-monitoring-of-expected-errors-removed" names="logging\ and\ monitoring\ of\ expected\ errors\ removed">
        <title>Logging and monitoring of expected errors removed</title>
        <section ids="status" names="status">
            <title>Status</title>
            <paragraph>Accepted</paragraph>
        </section>
        <section ids="context" names="context">
            <title>Context</title>
            <paragraph>The setting <literal>EXPECTED_ERRORS</literal> was used for both expected and ignored errors in edx-platform.</paragraph>
            <paragraph>The functionality supporting expected errors was added:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>Because New Relic didn’t yet support this for Python, and</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Because it was thought that people may want more flexibility for marking errors as expected in addition to just the class name, and</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The setting provides a place to document why the change is being made.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>Updates regarding these three original reasons:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>New Relic now supports expected errors, so the custom functionality is redundant and complicated, and</paragraph>
                </list_item>
                <list_item>
                    <paragraph>This functionality has yet to be used, so it is also unnecessary.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>Note that the need for custom functionality for ignored errors differs from expected errors in the following ways:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>New Relic still has problems from time to time where it stops ignoring errors that it is supposed to be ignoring, and this redundant functionality is used to catch that issue, and</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Since New Relic does not capture details of ignored errors, the custom functionality to log these errors can still come in handy if more details are needed.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>This context can also be found in <reference name="[DEPR] Expected error part of EXPECTED_ERRORS" refuri="https://github.com/openedx/edx-platform/issues/32405">[DEPR] Expected error part of EXPECTED_ERRORS</reference>.</paragraph>
            <target ids="depr-expected-error-part-of-expected-errors" names="[depr]\ expected\ error\ part\ of\ expected_errors" refuri="https://github.com/openedx/edx-platform/issues/32405"></target>
            <section ids="decision" names="decision">
                <title>Decision</title>
                <paragraph>The custom ignored error functionality proposed in 0001-logging-and-monitoring-ignored-errors.rst will remain in place, but the custom expected error functionality will be removed.</paragraph>
            </section>
        </section>
        <section ids="consequence" names="consequence">
            <title>Consequence</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>A number of code changes are required to remove the expected functionality.</paragraph>
                    <bullet_list bullet="*">
                        <list_item>
                            <paragraph>In many placed in the code, “expected” was used to mean “ignored and expected”, and all such instances will be renamed to “ignored”.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>The setting <literal>EXPECTED_ERRORS</literal> will be renamed to <literal>IGNORED_ERRORS</literal>, which better matches how it was being used in the first place.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>The setting <literal>EXPECTED_ERRORS[REASON_EXPECTED]</literal> will be renamed to <literal>IGNORED_ERRORS[REASON_IGNORED]</literal>.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>The setting toggle <literal>EXPECTED_ERRORS[IS_IGNORED]</literal> will be removed, because it will now always be True.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>The how-to will be renamed to how_tos/logging-and-monitoring-ignored-errors.rst.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>For more details, see <reference refuri="https://github.com/openedx/edx-platform/pull/33184">https://github.com/openedx/edx-platform/pull/33184</reference> where this work is underway.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph>If anyone ever uses New Relic’s expected error functionality, the reason for marking an error as expected would need to be captured elsewhere.</paragraph>
                </list_item>
            </bullet_list>
        </section>
    </section>
</document>
