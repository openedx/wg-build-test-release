<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/openedx/edx-platform/docs/references/docs/openedx/core/djangoapps/oauth_dispatch/docs/decisions/0004-oauth-dispatch-as-router.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="oauth-dispatch-as-router" names="4.\ oauth\ dispatch\ as\ router">
        <title>4. OAuth Dispatch as Router</title>
    </section>
    <section ids="status" names="status">
        <title>Status</title>
        <paragraph>Accepted</paragraph>
    </section>
    <section ids="context" names="context">
        <title>Context</title>
        <paragraph>Although we decided to transition from DOP to DOT and from OpenID Connect to
            JWT Tokens, we are not able to update all of our clients and microservices
            rapidly. In the meantime, the Mobile team wants to move forward with DOT to
            support refresh tokens for the mobile apps.</paragraph>
    </section>
    <section ids="decision" names="decision">
        <title>Decision</title>
        <paragraph>Start using DOT for new OAuth2 clients and newer versions of the Mobile app,
            while supporting older DOP clients until all clients are updated to using
            DOT.</paragraph>
        <paragraph>The OAuth Dispatch app will function as a content-based router to the multiple
            <reference name="OAuth2" refuri="https://tools.ietf.org/html/rfc6749">OAuth2</reference> provider implementations that will need to exist within the platform
            during the transition phase. The app will route incoming OAuth2 REST requests
            based on the value of the client_id field in the request. If the client_id
            identifies an Application in DOT, then the request is routed to the DOT library.
            Otherwise, the request is routed to the DOP library.</paragraph>
        <paragraph>Once we fully execute the <reference name="transition plan from DOP to DOT" refuri="https://openedx.atlassian.net/wiki/spaces/OpenDev/pages/327778541/OAuth+2.0+Roadmap">transition plan from DOP to DOT</reference>, we will continue
            to use and maintain this app as it will also contain edx-specific customizations
            that we will add over time. At that point, the app will no longer act as a
            router but will retain its proxy functionality to DOT.</paragraph>
        <target ids="oauth2" names="oauth2" refuri="https://tools.ietf.org/html/rfc6749"></target>
        <target ids="transition-plan-from-dop-to-dot" names="transition\ plan\ from\ dop\ to\ dot" refuri="https://openedx.atlassian.net/wiki/spaces/OpenDev/pages/327778541/OAuth+2.0+Roadmap"></target>
    </section>
    <section ids="consequences" names="consequences">
        <title>Consequences</title>
        <section ids="pluses" names="pluses">
            <title>Pluses</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>The OAuth Dispatch app will provide an intermediary interface to the underlying
                        implementation(s), which shields the rest of the platform from changes in the
                        underlying libraries.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="minuses" names="minuses">
            <title>Minuses</title>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>The LMSâ€™ security would be impacted if there are security vulnerabilities found
                        in either DOP or DOT. Since DOP is no longer supported, security issues may not
                        be addressed.</paragraph>
                </list_item>
            </bullet_list>
        </section>
    </section>
</document>
