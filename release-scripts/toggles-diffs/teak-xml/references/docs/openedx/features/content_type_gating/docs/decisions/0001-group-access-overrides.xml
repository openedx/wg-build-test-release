<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/Users/sarinacanelake/openedx/edx-platform/docs/references/docs/openedx/features/content_type_gating/docs/decisions/0001-group-access-overrides.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:http="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <section ids="group-access-overrides" names="1.\ group\ access\ overrides">
        <title>1. Group Access Overrides</title>
        <section ids="status" names="status">
            <title>Status</title>
            <paragraph>Accepted</paragraph>
        </section>
        <section ids="context" names="context">
            <title>Context</title>
            <paragraph>In order to implement Feature Based Enrollment (FBE), we need to be able
                to automatically restrict content to a specific set of authorized
                users. This automatic restriction needs to be based on whether content
                is graded and capable of producing a score. Whether a particular XBlock
                is graded and scorable is denoted by attributes on that XBlock.</paragraph>
            <paragraph>There are two separate systems that need load XBlocks and need to
                be restricted: the courseware rendering on the web, and the courseware
                rendering in the mobile app. Courseware rendering accesses XBlock
                attributes via the <literal>FieldData</literal> api, and can be modified by
                <literal>FieldDataOverrides</literal>. The mobile app uses the course_blocks api,
                which is backed by <literal>BlockTransformers</literal>.</paragraph>
            <paragraph>Most differentiated content is managed by <literal>UserPartitions</literal>. These
                segment users by customizable criteria, and then can be applied as
                access control by setting the <literal>group_access</literal> field on an <literal>XBlock</literal>.
                There is an existing <literal>UserPartition</literal> that segments users based on
                their enrollment track (the <literal>EnrollmentTrackUserPartition</literal>. However,
                many courses already manage content using the <literal>EnrollmentTrackUserPartition</literal>,
                so it isn’t a good candidate to overwrite for FBE.</paragraph>
        </section>
        <section ids="decision" names="decision">
            <title>Decision</title>
            <paragraph>In order to restrict access to graded content, we will create a new
                <literal>UserPartition</literal> specifically for FBE. That partition will segment
                users based on their enrollment track and any other criteria that become
                relevant for FBE implementation. We will override the <literal>group_access</literal>
                of all graded and scorable XBlocks by using a new <literal>FieldDataOverride</literal>
                for in-courseware acccess, and a new <literal>BlockTransformer</literal> for mobile/
                course_blocks api access. Both of those will respect the same rules for
                when to override the <literal>group_access</literal> attribute.</paragraph>
        </section>
        <section ids="consequences" names="consequences">
            <title>Consequences</title>
            <paragraph>All graded content (with possible manual exceptions) will have <literal>group_access</literal>
                overridden to assign the content to the “Full Access Only” partition of
                the new <literal>ContentTypeGatingPartition</literal>. Studio Authors will see reference
                to both the <literal>ContentTypeGatingPartition</literal> (Feature Based Enrollment Partition)
                and the <literal>EnrollmentTrack</literal> partition in Studio, if they are authorized to
                modify them. Masquerade, which only modifies a single group at a time, is
                unable to provide an accurate simulation of the interaction between having
                graded content restricted behind the <literal>EnrollmentTrack</literal> partition.</paragraph>
        </section>
    </section>
</document>
